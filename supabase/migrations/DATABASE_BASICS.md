# ๐ ะัะฝะพะฒั ะฑะฐะท ะดะฐะฝะฝัั ะฝะฐ ะฟัะธะผะตัะต ะฟัะพะตะบัะฐ

ะญัะฐ ัะฟัะฐะฒะบะฐ ะพะฑัััะฝัะตั ะพัะฝะพะฒะฝัะต ะบะพะฝัะตะฟัะธะธ ะฑะฐะท ะดะฐะฝะฝัั ะฝะฐ ัะตะฐะปัะฝัั ะฟัะธะผะตัะฐั ะธะท ะฝะฐัะตะณะพ ะฟัะพะตะบัะฐ.

---

## ๐๏ธ ะัะฝะพะฒะฝัะต ะฟะพะฝััะธั

### ะขะฐะฑะปะธัะฐ (Table)
**ะงัะพ ััะพ:** ะกัััะบัััะฐ ะดะปั ััะฐะฝะตะฝะธั ะดะฐะฝะฝัั, ะฟะพัะพะถะฐั ะฝะฐ ัะฐะฑะปะธัั Excel.

**ะัะธะผะตั ะธะท ะฟัะพะตะบัะฐ:**
```sql
CREATE TABLE products (
  id UUID PRIMARY KEY,
  nm_id BIGINT UNIQUE NOT NULL,
  vendor_code TEXT UNIQUE NOT NULL,
  title TEXT NOT NULL
);
```

**ะ ะฝะฐัะตะผ ะฟัะพะตะบัะต:**
- `products` - ัะฐะฑะปะธัะฐ ะฐััะธะบัะปะพะฒ (40 ะทะฐะฟะธัะตะน)
- `adv_campaign_daily_stats` - ะดะตัะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ (ัััััะธ ะทะฐะฟะธัะตะน)
- `adv_params` - ะฐะณัะตะณะธัะพะฒะฐะฝะฝะฐั ััะฐัะธััะธะบะฐ (ะดะตัััะบะธ ะทะฐะฟะธัะตะน)

---

### ะกััะฝะพััั (Entity)
**ะงัะพ ััะพ:** ะะฑัะตะบั ัะตะฐะปัะฝะพะณะพ ะผะธัะฐ, ะบะพัะพััะน ะผั ััะฐะฝะธะผ ะฒ ะะ.

**ะัะธะผะตัั:**
- ๐๏ธ **ะขะพะฒะฐั** โ ัะฐะฑะปะธัะฐ `products`
- ๐ **ะะตะบะปะฐะผะฝะฐั ะบะฐะผะฟะฐะฝะธั** โ ัะฐะฑะปะธัะฐ `adv_campaign_daily_stats`
- ๐ **ะกัะฐัะธััะธะบะฐ ะฐััะธะบัะปะฐ** โ ัะฐะฑะปะธัะฐ `adv_params`

---

### ะััะธะฑัั (Attribute/Column)
**ะงัะพ ััะพ:** ะกะฒะพะนััะฒะพ ัััะฝะพััะธ (ะบะพะปะพะฝะบะฐ ะฒ ัะฐะฑะปะธัะต).

**ะัะธะผะตั - ะฐััะธะบัะป ะฒ `products`:**
```
nm_id        = 456770543          (ะฐััะธะบัะป WB)
vendor_code  = "rykzak_black"     (ะฝะฐั ะฐััะธะบัะป)
title        = "ะัะบะทะฐะบ ัะตัะฝัะน"    (ะฝะฐะทะฒะฐะฝะธะต)
```

**ะขะธะฟั ะดะฐะฝะฝัั:**
- `BIGINT` - ะฑะพะปััะธะต ัะตะปัะต ัะธัะปะฐ (nm_id)
- `TEXT` - ัะตะบัั ะปัะฑะพะน ะดะปะธะฝั (vendor_code, title)
- `DATE` - ะดะฐัะฐ ะฑะตะท ะฒัะตะผะตะฝะธ (2025-10-09)
- `TIMESTAMPTZ` - ะดะฐัะฐ ะธ ะฒัะตะผั ั ัะฐัะพะฒัะผ ะฟะพััะพะผ
- `NUMERIC(10,2)` - ะดัะพะฑะฝะพะต ัะธัะปะพ (10 ัะธัั, 2 ะฟะพัะปะต ะทะฐะฟััะพะน)
- `UUID` - ัะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั (gen_random_uuid())

---

## ๐ ะะปััะธ (Keys)

### PRIMARY KEY (ะะตัะฒะธัะฝัะน ะบะปัั)
**ะงัะพ ััะพ:** ะฃะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั ะทะฐะฟะธัะธ. ะะฐะถะดะฐั ัััะพะบะฐ ะธะผะตะตั ัะฒะพะน ัะฝะธะบะฐะปัะฝัะน PK.

**ะัะธะผะตั:**
```sql
CREATE TABLE products (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),  -- ะะตัะฒะธัะฝัะน ะบะปัั
  nm_id BIGINT,
  ...
);
```

**ะะธะทัะฐะปะธะทะฐัะธั:**
```
id                                    | nm_id      | vendor_code
--------------------------------------|------------|---------------
f47ac10b-58cc-4372-a567-0e02b2c3d479 | 456770543  | rykzak_black
a3c4e5f7-1234-5678-9abc-def012345678 | 467102886  | korzina_tiger
```

ะะฐะถะดัะน `id` ัะฝะธะบะฐะปะตะฝ โ ะผะพะถะฝะพ ัะพัะฝะพ ะฝะฐะนัะธ ะปัะฑัั ะทะฐะฟะธัั.

---

### UNIQUE (ะฃะฝะธะบะฐะปัะฝะพััั)
**ะงัะพ ััะพ:** ะะฐัะฐะฝัะธััะตั, ััะพ ะทะฝะฐัะตะฝะธะต ะฝะต ะฟะพะฒัะพััะตััั ะฒ ัะฐะฑะปะธัะต.

**ะัะธะผะตั:**
```sql
nm_id BIGINT UNIQUE NOT NULL,  -- ะะดะธะฝ nm_id ะผะพะถะตั ะฑััั ัะพะปัะบะพ ัะฐะท
vendor_code TEXT UNIQUE NOT NULL,  -- ะะดะธะฝ vendor_code ะผะพะถะตั ะฑััั ัะพะปัะบะพ ัะฐะท
```

**ะงัะพ ััะพ ะทะฝะฐัะธั:**
- โ ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั: `nm_id=123456, vendor_code="rykzak_red"`
- โ ะะตะปัะทั ะดะพะฑะฐะฒะธัั ะตัะต ะพะดะฝั ะทะฐะฟะธัั ั `nm_id=123456` (ัะถะต ะตััั!)
- โ ะะตะปัะทั ะดะพะฑะฐะฒะธัั ะตัะต ะพะดะฝั ะทะฐะฟะธัั ั `vendor_code="rykzak_red"` (ัะถะต ะตััั!)

---

### FOREIGN KEY (ะะฝะตัะฝะธะน ะบะปัั)
**ะงัะพ ััะพ:** ะกะฒัะทั ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ. ะะพะบะฐะทัะฒะฐะตั, ััะพ ะทะฝะฐัะตะฝะธะต ะฒ ะพะดะฝะพะน ัะฐะฑะปะธัะต ัััะปะฐะตััั ะฝะฐ ะดััะณัั.

**ะัะธะผะตั ะธะท ะฟัะพะตะบัะฐ:**
```sql
CREATE TABLE adv_params (
  nm_id BIGINT NOT NULL,
  ...
  FOREIGN KEY (nm_id) REFERENCES products(nm_id) ON DELETE CASCADE
);
```

**ะะธะทัะฐะปะธะทะฐัะธั ัะฒัะทะธ:**
```
products:
  nm_id=456770543, vendor_code="rykzak_black"
       โ
       โ (ัะฒัะทั ัะตัะตะท nm_id)
       โ
adv_params:
  nm_id=456770543, date=2025-10-09, views=4710
  nm_id=456770543, date=2025-10-10, views=3190
```

**ะัะฐะฒะธะปะฐ:**
- โ ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะทะฐะฟะธัั ะฒ `adv_params` ั `nm_id=456770543` (ะตััั ะฒ `products`)
- โ ะะตะปัะทั ะดะพะฑะฐะฒะธัั ั `nm_id=999999999` (ะฝะตั ะฒ `products`)
- `ON DELETE CASCADE` โ ะฟัะธ ัะดะฐะปะตะฝะธะธ ะธะท `products`, ัะดะฐะปัััั ะธ ะทะฐะฟะธัะธ ะธะท `adv_params`

---

### UNIQUE INDEX (ะกะพััะฐะฒะฝะพะน ัะฝะธะบะฐะปัะฝัะน ะบะปัั)
**ะงัะพ ััะพ:** ะะฐัะฐะฝัะธััะตั ัะฝะธะบะฐะปัะฝะพััั ะบะพะผะฑะธะฝะฐัะธะธ ะฝะตัะบะพะปัะบะธั ะฟะพะปะตะน.

**ะัะธะผะตั:**
```sql
CREATE UNIQUE INDEX ux_adv_params_nm_date ON adv_params(nm_id, date);
```

**ะงัะพ ััะพ ะทะฝะฐัะธั:**
- โ ะะพะถะฝะพ: `nm_id=123, date=2025-10-09`
- โ ะะพะถะฝะพ: `nm_id=123, date=2025-10-10` (ะดััะณะฐั ะดะฐัะฐ)
- โ ะะพะถะฝะพ: `nm_id=456, date=2025-10-09` (ะดััะณะพะน ะฐััะธะบัะป)
- โ ะะตะปัะทั: ะตัะต ะพะดะฝั ะทะฐะฟะธัั `nm_id=123, date=2025-10-09` (ัะถะต ะตััั!)

**ะะธะทัะฐะปะธะทะฐัะธั:**
```
adv_params:
  nm_id=456770543, date=2025-10-09  โ OK
  nm_id=456770543, date=2025-10-10  โ OK (ะดััะณะฐั ะดะฐัะฐ)
  nm_id=467102886, date=2025-10-09  โ OK (ะดััะณะพะน ะฐััะธะบัะป)
  nm_id=456770543, date=2025-10-09  โ ะะจะะะะ! ะัะฑะปะธะบะฐั!
```

---

## ๐ ะะฝะดะตะบัั (Indexes)

**ะงัะพ ััะพ:** ะฃัะบะพัััั ะฟะพะธัะบ ะดะฐะฝะฝัั (ะบะฐะบ ัะบะฐะทะฐัะตะปั ะฒ ะบะฝะธะณะต).

**ะัะธะผะตั:**
```sql
CREATE INDEX idx_adv_params_date ON adv_params(date);
```

**ะะตะท ะธะฝะดะตะบัะฐ:**
```
ะัะตะผ date=2025-10-09 โ ะฟะตัะตะฑะธัะฐะตะผ ะะกะ 1000 ะทะฐะฟะธัะตะน (ะผะตะดะปะตะฝะฝะพ)
```

**ะก ะธะฝะดะตะบัะพะผ:**
```
ะัะตะผ date=2025-10-09 โ ััะฐะทั ะฝะฐัะพะดะธะผ ะฝัะถะฝัะต (ะฑััััะพ!)
```

**ะะฝะดะตะบัั ะฒ ะฟัะพะตะบัะต:**
```sql
-- ะัััััะน ะฟะพะธัะบ ะฟะพ ะฐััะธะบัะปั
CREATE INDEX idx_adv_params_nm_id ON adv_params(nm_id);

-- ะัััััะน ะฟะพะธัะบ ะฟะพ ะดะฐัะต
CREATE INDEX idx_adv_params_date ON adv_params(date);

-- ะัััััะน ะฟะพะธัะบ ะฟะพ ะบะพะผะฑะธะฝะฐัะธะธ (ัะพััะฐะฒะฝะพะน ะธะฝะดะตะบั)
CREATE INDEX idx_adv_daily_nm_date ON adv_campaign_daily_stats(nm_id, date);
```

---

## โ๏ธ ะขัะธะณะณะตัั (Triggers)

**ะงัะพ ััะพ:** ะะฒัะพะผะฐัะธัะตัะบะธะต ะดะตะนััะฒะธั ะฟัะธ INSERT/UPDATE/DELETE.

**ะัะธะผะตั ะธะท ะฟัะพะตะบัะฐ:**
```sql
CREATE TRIGGER update_adv_campaign_daily_stats_updated_at
    BEFORE UPDATE ON adv_campaign_daily_stats
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. ะัะพ-ัะพ ะพะฑะฝะพะฒะปัะตั ะทะฐะฟะธัั ะฒ `adv_campaign_daily_stats`
2. **BEFORE UPDATE** โ ะฟะตัะตะด ัะพััะฐะฝะตะฝะธะตะผ ััะฐะฑะฐััะฒะฐะตั ััะธะณะณะตั
3. ะขัะธะณะณะตั ะฒัะทัะฒะฐะตั ััะฝะบัะธั `update_updated_at_column()`
4. ะคัะฝะบัะธั ัััะฐะฝะฐะฒะปะธะฒะฐะตั `updated_at = NOW()`
5. ะะฐะฟะธัั ัะพััะฐะฝัะตััั ั ะฝะพะฒัะผ `updated_at`

**ะัะธะผะตั:**
```sql
-- ะะฑะฝะพะฒะปัะตะผ views
UPDATE adv_campaign_daily_stats 
SET views = 5000 
WHERE nm_id = 456770543;

-- ะขัะธะณะณะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะดะพะฑะฐะฒะปัะตั:
-- updated_at = NOW()
```

---

## ๐ ะะฟะตัะฐัะธะธ ั ะดะฐะฝะฝัะผะธ

### INSERT (ะััะฐะฒะบะฐ)
```sql
INSERT INTO products (nm_id, vendor_code, title, category_wb)
VALUES (456770543, 'rykzak_black', 'ะัะบะทะฐะบ ัะตัะฝัะน', 'ะัะบะทะฐะบะธ');
```

### SELECT (ะัะฑะพัะบะฐ)
```sql
-- ะัะต ะทะฐะฟะธัะธ
SELECT * FROM products;

-- ะก ัะธะปัััะพะผ
SELECT * FROM products WHERE nm_id = 456770543;

-- ะก ัะพััะธัะพะฒะบะพะน
SELECT * FROM products ORDER BY nm_id DESC;

-- ะะณัะตะณะฐัะธั
SELECT nm_id, SUM(views) AS total_views
FROM adv_campaign_daily_stats
GROUP BY nm_id;
```

### UPDATE (ะะฑะฝะพะฒะปะตะฝะธะต)
```sql
UPDATE products 
SET title = 'ะัะบะทะฐะบ ัะตัะฝัะน ะพะฑะฝะพะฒะปะตะฝะฝัะน'
WHERE nm_id = 456770543;
```

### DELETE (ะฃะดะฐะปะตะฝะธะต)
```sql
DELETE FROM products WHERE nm_id = 456770543;
```

### UPSERT (ะััะฐะฒะบะฐ ะธะปะธ ะพะฑะฝะพะฒะปะตะฝะธะต)
```sql
INSERT INTO adv_params (nm_id, date, views)
VALUES (456770543, '2025-10-09', 4710)
ON CONFLICT (nm_id, date) DO UPDATE SET
  views = EXCLUDED.views,
  updated_at = NOW();
```

**ะงัะพ ะฟัะพะธััะพะดะธั:**
- ะัะปะธ ะทะฐะฟะธัะธ ั `(nm_id=456770543, date=2025-10-09)` ะฝะตั โ INSERT
- ะัะปะธ ัะฐะบะฐั ะทะฐะฟะธัั ัะถะต ะตััั โ UPDATE

---

## ๐ฏ ะัะฐะบัะธัะตัะบะธะน ะฟัะธะผะตั: ะะณัะตะณะฐัะธั

ะะฐัะฐ ััะฝะบัะธั `aggregate_adv_params` ะพะฑัะตะดะธะฝัะตั ะฝะตัะบะพะปัะบะพ ะบะพะฝัะตะฟัะธะน:

### ะัะพะดะฝัะต ะดะฐะฝะฝัะต (adv_campaign_daily_stats):
```
advert_id | nm_id      | date       | views
----------|------------|------------|-------
27114105  | 456770543  | 2025-10-09 | 1637
27114115  | 456770543  | 2025-10-09 | 3073
29284679  | 473520914  | 2025-10-09 | 1133
```

### SQL ะทะฐะฟัะพั:
```sql
SELECT
  nm_id,
  date,
  SUM(views) AS views  -- ะะณัะตะณะฐัะธั: ััะผะผะธััะตะผ views
FROM adv_campaign_daily_stats
WHERE date >= '2025-10-09' AND date <= '2025-10-09'  -- ะคะธะปััั
GROUP BY nm_id, date  -- ะััะฟะฟะธัะพะฒะบะฐ
```

### ะะตะทัะปััะฐั (adv_params):
```
nm_id      | date       | views
-----------|------------|-------
456770543  | 2025-10-09 | 4710  (1637 + 3073)
473520914  | 2025-10-09 | 1133
```

### UPSERT ั ััะปะพะฒะธะตะผ:
```sql
ON CONFLICT (nm_id, date) DO UPDATE SET
  views = EXCLUDED.views,
  updated_at = CASE 
    WHEN adv_params.views IS DISTINCT FROM EXCLUDED.views
    THEN NOW()  -- ะะฑะฝะพะฒะปัะตะผ ัะพะปัะบะพ ะตัะปะธ ะธะทะผะตะฝะธะปะพัั
    ELSE adv_params.updated_at  -- ะััะฐะฒะปัะตะผ ััะฐัะพะต
  END;
```

---

## ๐ ะกะฒัะทะธ ะผะตะถะดั ัะฐะฑะปะธัะฐะผะธ

### ะะดะธะฝ ะบ ะพะดะฝะพะผั (One-to-One)
ะะดะธะฝ ะฟัะพะดัะบั โ ะพะดะฝะฐ ะทะฐะฟะธัั ะฒ products (PRIMARY KEY ะณะฐัะฐะฝัะธััะตั)

### ะะดะธะฝ ะบะพ ะผะฝะพะณะธะผ (One-to-Many)
```
products (1)
  โโโ adv_params (ะผะฝะพะณะพ)
  
ะะดะธะฝ ะฟัะพะดัะบั ะผะพะถะตั ะธะผะตัั ะผะฝะพะณะพ ะทะฐะฟะธัะตะน ััะฐัะธััะธะบะธ (ะฟะพ ะพะดะฝะพะน ะฝะฐ ะบะฐะถะดัั ะดะฐัั)

products:
  nm_id=456770543, vendor_code="rykzak_black"
       โ
adv_params:
  nm_id=456770543, date=2025-10-09
  nm_id=456770543, date=2025-10-10
  nm_id=456770543, date=2025-10-11
```

### ะะฝะพะณะธะต ะบะพ ะผะฝะพะณะธะผ (Many-to-Many)
```
campaigns (ะผะฝะพะณะพ) โโ products (ะผะฝะพะณะพ)
  
ะงะตัะตะท ะฟัะพะผะตะถััะพัะฝัั ัะฐะฑะปะธัั adv_campaign_daily_stats:
  
campaign_1 โ ะฟัะพะดัะบั_1
campaign_1 โ ะฟัะพะดัะบั_2
campaign_2 โ ะฟัะพะดัะบั_1
campaign_2 โ ะฟัะพะดัะบั_3
```

---

## ๐ก๏ธ ะะณัะฐะฝะธัะตะฝะธั (Constraints)

### NOT NULL
```sql
nm_id BIGINT NOT NULL  -- ะะฝะฐัะตะฝะธะต ะพะฑัะทะฐัะตะปัะฝะพ
```
- โ `nm_id=456770543`
- โ `nm_id=NULL` (ะพัะธะฑะบะฐ!)

### DEFAULT
```sql
created_at TIMESTAMPTZ DEFAULT NOW()  -- ะะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั
```
ะัะปะธ ะฝะต ัะบะฐะทะฐัั `created_at` ะฟัะธ INSERT, ะฐะฒัะพะผะฐัะธัะตัะบะธ ัััะฐะฝะพะฒะธััั ัะตะบััะตะต ะฒัะตะผั.

### CHECK
```sql
views INTEGER CHECK (views >= 0)  -- ะัะพะฒะตัะบะฐ ััะปะพะฒะธั
```
- โ `views=100`
- โ `views=-10` (ะพัะธะฑะบะฐ! views ะฝะต ะผะพะถะตั ะฑััั ะพััะธัะฐัะตะปัะฝัะผ)

---

## ๐ ะะพะปะตะทะฝัะต SQL ะฟะฐััะตัะฝั

### 1. ะฃัะปะพะฒะฝะฐั ะฐะณัะตะณะฐัะธั
```sql
SELECT
  nm_id,
  SUM(CASE WHEN date >= '2025-10-09' THEN views ELSE 0 END) AS views_period_1,
  SUM(CASE WHEN date >= '2025-10-10' THEN views ELSE 0 END) AS views_period_2
FROM adv_params
GROUP BY nm_id;
```

### 2. ะะพะดะทะฐะฟัะพัั
```sql
SELECT *
FROM products
WHERE nm_id IN (
  SELECT DISTINCT nm_id 
  FROM adv_params 
  WHERE views > 1000
);
```

### 3. JOIN (ะกะพะตะดะธะฝะตะฝะธะต ัะฐะฑะปะธั)
```sql
SELECT 
  p.vendor_code,
  a.date,
  a.views
FROM products p
JOIN adv_params a ON p.nm_id = a.nm_id
WHERE a.date = '2025-10-09';
```

### 4. Window Functions (ะะบะพะฝะฝัะต ััะฝะบัะธะธ)
```sql
SELECT
  nm_id,
  date,
  views,
  SUM(views) OVER (PARTITION BY nm_id ORDER BY date) AS cumulative_views
FROM adv_params;
```

---

## ๐ ะัะพะณะพะฒะฐั ะบะฐััะธะฝะฐ ะฟัะพะตะบัะฐ

```
โโโโโโโโโโโโโโโโโโโ
โ    products     โ โ ะกะฟัะฐะฒะพัะฝะธะบ ะฐััะธะบัะปะพะฒ (40 ะทะฐะฟะธัะตะน)
โ   nm_id (PK)    โ
โ   vendor_code   โ
โโโโโโโโโโฌโโโโโโโโโ
         โ FK (nm_id)
         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ adv_campaign_daily_stats    โ โ ะะตัะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ (ัััััะธ ะทะฐะฟะธัะตะน)
โ advert_id, nm_id, date (PK) โ   ะะฐะถะดะฐั ะบะฐะผะฟะฐะฝะธั ร ะฐััะธะบัะป ร ะดะฐัะฐ
โ views, clicks, sum, orders  โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
               โ ะะณัะตะณะฐัะธั (SUM, GROUP BY)
               โ
         โโโโโโโโโโโโโโโ
         โ adv_params  โ โ ะะณัะตะณะธัะพะฒะฐะฝะฝะฐั ััะฐัะธััะธะบะฐ (ะดะตัััะบะธ ะทะฐะฟะธัะตะน)
         โ nm_id, date โ   ะะดะธะฝ ะฐััะธะบัะป ร ะดะฐัะฐ (ััะผะผะฐ ะฒัะตั ะบะฐะผะฟะฐะฝะธะน)
         โ (PK)        โ
         โโโโโโโโโโโโโโโ
```

---

## ๐ ะงัะพ ะดะฐะปััะต?

ะขะตะฟะตัั ัั ะฟะพะฝะธะผะฐะตัั:
- โ ะะฐะบ ััััะพะตะฝั ัะฐะฑะปะธัั ะธ ัะฒัะทะธ
- โ ะงัะพ ัะฐะบะพะต ะฟะตัะฒะธัะฝัะต ะธ ะฒะฝะตัะฝะธะต ะบะปััะธ
- โ ะะฐะบ ัะฐะฑะพัะฐัั ะธะฝะดะตะบัั ะธ ััะธะณะณะตัั
- โ ะะฐะบ ะฐะณัะตะณะธัััััั ะดะฐะฝะฝัะต ะฒ ะฝะฐัะตะผ ะฟัะพะตะบัะต
- โ ะะพัะตะผั updated_at ะพะฑะฝะพะฒะปัะปัั ะฝะตะฟัะฐะฒะธะปัะฝะพ ะธ ะบะฐะบ ะผั ััะพ ะธัะฟัะฐะฒะธะปะธ

**ะกะปะตะดัััะธะต ัะฐะณะธ:**
1. ะะทััะธ ะผะธะณัะฐัะธะธ ะดััะณะธั ัะฐะฑะปะธั (`cr_daily_stats`, `product_sizes`)
2. ะะพะฟัะพะฑัะน ะฝะฐะฟะธัะฐัั ัะฒะพะธ SQL ะทะฐะฟัะพัั ะดะปั ะฐะฝะฐะปะธะทะฐ ะดะฐะฝะฝัั
3. ะญะบัะฟะตัะธะผะตะฝัะธััะน ั JOIN ะธ ะฐะณัะตะณะฐัะธัะผะธ ะฒ Supabase Studio

ะฃะดะฐัะธ! ๐ฏ


